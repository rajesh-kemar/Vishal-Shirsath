<div class="container mt-4">
  <h2 class="text-primary fw-bold mb-4">Vehicle Management</h2>

  <!-- Add / Edit Vehicle -->
  <div class="card p-3 mb-4 shadow-sm">
    <h5 class="text-secondary">
      {{ selectedVehicleId ? 'Edit Vehicle' : 'Add New Vehicle' }}
    </h5>

    <div class="row g-3">
      <div class="col-md-4">
        <input
          [(ngModel)]="newVehicle.vehicleNumber"
          class="form-control"
          placeholder="Vehicle Number"
        />
      </div>
      <div class="col-md-4">
        <input
          [(ngModel)]="newVehicle.type"
          class="form-control"
          placeholder="Type (Truck, Van, etc)"
        />
      </div>
      <div class="col-md-4">
        <input
          type="number"
          [(ngModel)]="newVehicle.capacity"
          class="form-control"
          placeholder="Capacity (Tons)"
        />
      </div>
    </div>

    <div class="mt-3">
      <button class="btn btn-success me-2" (click)="addOrUpdateVehicle()">
        {{ selectedVehicleId ? 'Update Vehicle' : 'Add Vehicle' }}
      </button>

      <button
        *ngIf="selectedVehicleId"
        class="btn btn-secondary"
        (click)="resetForm()"
      >
        Cancel
      </button>
    </div>

    <!-- âœ… Messages -->
    <div *ngIf="successMsg" class="alert alert-success mt-3">
      {{ successMsg }}
    </div>
    <div *ngIf="errorMsg" class="alert alert-danger mt-3">
      {{ errorMsg }}
    </div>
  </div>

  <!-- Vehicle List -->
  <div class="card shadow-sm">
    <div
      class="card-header bg-primary text-white d-flex justify-content-between align-items-center"
    >
      <span>Vehicle List</span>
      <span *ngIf="isLoading" class="spinner-border spinner-border-sm text-light"></span>
    </div>
    <div class="card-body p-0">
      <table class="table table-striped table-hover m-0">
        <thead class="table-light">
          <tr>
            <th>Vehicle Number</th>
            <th>Type</th>
            <th>Capacity (Tons)</th>
            <th>Availability</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let v of vehicles">
            <td>{{ v.vehicleNumber }}</td>
            <td>{{ v.type }}</td>
            <td>{{ v.capacity }}</td>
            <td>
              <span
                class="badge"
                [ngClass]="{
                  'bg-success': v.availability === 'Available',
                  'bg-danger': v.availability === 'Unavailable'
                }"
              >
                {{ v.availability }}
              </span>
            </td>
            <td>
              <button
                class="btn btn-warning btn-sm me-2"
                (click)="editVehicle(v)"
              >
                Edit
              </button>

              <button
                class="btn btn-danger btn-sm"
                (click)="deleteVehicle(v.vehicleId)"
              >
                Delete
              </button>
            </td>
          </tr>

          <!-- Empty state -->
          <tr *ngIf="!isLoading && vehicles.length === 0">
            <td colspan="5" class="text-center text-muted py-3">
              No vehicles available
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
